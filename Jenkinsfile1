pipeline{
    agent any
    environment {
        registry = "rasbarbies/vproappdock"
        registryCredential = 'docker-hub-credentials-id'
    }

    /*agent {
        label 'KOPS'
    } */

    

    stages{
        stage('BUILD') {
            steps {
                sh 'mvn clean package'
            }
        }
        stage('UNIT TEST'){
            steps {
                sh 'mvn test'
            }
        }
        stage('BUILD APP IMAGE') {
          steps {
            script {
              dockerImage = docker.build registry + ":V$BUILD_NUMBER"
              }
            }

           }
    }
}